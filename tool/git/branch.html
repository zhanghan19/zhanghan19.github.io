<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>分支管理 | 张寒</title>
    <meta name="generator" content="VuePress 1.6.0">
    
    <meta name="description" content="Just playing around22">
    <link rel="preload" href="/assets/css/0.styles.f945d553.css" as="style"><link rel="preload" href="/assets/js/app.05e46699.js" as="script"><link rel="preload" href="/assets/js/7.51cb44f6.js" as="script"><link rel="preload" href="/assets/js/1.c271960c.js" as="script"><link rel="preload" href="/assets/js/3.717632d5.js" as="script"><link rel="preload" href="/assets/js/119.62e33162.js" as="script"><link rel="prefetch" href="/assets/js/10.c3a0598e.js"><link rel="prefetch" href="/assets/js/100.f1ab384c.js"><link rel="prefetch" href="/assets/js/101.ad13233c.js"><link rel="prefetch" href="/assets/js/102.524cda03.js"><link rel="prefetch" href="/assets/js/103.a371f422.js"><link rel="prefetch" href="/assets/js/104.dca56694.js"><link rel="prefetch" href="/assets/js/105.4fd70406.js"><link rel="prefetch" href="/assets/js/106.a303abe2.js"><link rel="prefetch" href="/assets/js/107.9df6ccdf.js"><link rel="prefetch" href="/assets/js/108.50957d1b.js"><link rel="prefetch" href="/assets/js/109.714cb62c.js"><link rel="prefetch" href="/assets/js/11.ee8687a5.js"><link rel="prefetch" href="/assets/js/110.081becac.js"><link rel="prefetch" href="/assets/js/111.ebeb1448.js"><link rel="prefetch" href="/assets/js/112.3752da47.js"><link rel="prefetch" href="/assets/js/113.7b978959.js"><link rel="prefetch" href="/assets/js/114.9e6145ab.js"><link rel="prefetch" href="/assets/js/115.a6ab8a76.js"><link rel="prefetch" href="/assets/js/116.bc48ccab.js"><link rel="prefetch" href="/assets/js/117.0b8ab8b8.js"><link rel="prefetch" href="/assets/js/118.b320a99b.js"><link rel="prefetch" href="/assets/js/12.bc27504b.js"><link rel="prefetch" href="/assets/js/120.7f97d5ab.js"><link rel="prefetch" href="/assets/js/121.97a63929.js"><link rel="prefetch" href="/assets/js/122.f1ebd012.js"><link rel="prefetch" href="/assets/js/123.bb717b5b.js"><link rel="prefetch" href="/assets/js/124.b166ee77.js"><link rel="prefetch" href="/assets/js/125.4210ad59.js"><link rel="prefetch" href="/assets/js/126.093cbfa5.js"><link rel="prefetch" href="/assets/js/127.5e03d83c.js"><link rel="prefetch" href="/assets/js/128.20a6455e.js"><link rel="prefetch" href="/assets/js/129.cf873474.js"><link rel="prefetch" href="/assets/js/13.d4fe3405.js"><link rel="prefetch" href="/assets/js/130.6d27127d.js"><link rel="prefetch" href="/assets/js/131.9d6eed25.js"><link rel="prefetch" href="/assets/js/132.8b377f3a.js"><link rel="prefetch" href="/assets/js/133.991e53e5.js"><link rel="prefetch" href="/assets/js/134.e07d4bba.js"><link rel="prefetch" href="/assets/js/135.76cacbfc.js"><link rel="prefetch" href="/assets/js/14.1b7fd1ef.js"><link rel="prefetch" href="/assets/js/15.f7a8bac7.js"><link rel="prefetch" href="/assets/js/16.e3432c5c.js"><link rel="prefetch" href="/assets/js/17.7f9634b3.js"><link rel="prefetch" href="/assets/js/18.2846ba31.js"><link rel="prefetch" href="/assets/js/19.66fc652c.js"><link rel="prefetch" href="/assets/js/20.6ccb6f58.js"><link rel="prefetch" href="/assets/js/21.3ec5748e.js"><link rel="prefetch" href="/assets/js/22.3846916a.js"><link rel="prefetch" href="/assets/js/23.9d5e3f6e.js"><link rel="prefetch" href="/assets/js/24.d6816555.js"><link rel="prefetch" href="/assets/js/25.f1637245.js"><link rel="prefetch" href="/assets/js/26.20544a8c.js"><link rel="prefetch" href="/assets/js/27.3c34266c.js"><link rel="prefetch" href="/assets/js/28.08fc328a.js"><link rel="prefetch" href="/assets/js/29.9a8fcdf3.js"><link rel="prefetch" href="/assets/js/30.e50b9cc7.js"><link rel="prefetch" href="/assets/js/31.2281698d.js"><link rel="prefetch" href="/assets/js/32.740ffbab.js"><link rel="prefetch" href="/assets/js/33.786e002b.js"><link rel="prefetch" href="/assets/js/34.34c02477.js"><link rel="prefetch" href="/assets/js/35.8357d730.js"><link rel="prefetch" href="/assets/js/36.a01ee942.js"><link rel="prefetch" href="/assets/js/37.c01442f0.js"><link rel="prefetch" href="/assets/js/38.6799b0d1.js"><link rel="prefetch" href="/assets/js/39.0b54e88c.js"><link rel="prefetch" href="/assets/js/4.ba24564e.js"><link rel="prefetch" href="/assets/js/40.9b1c592e.js"><link rel="prefetch" href="/assets/js/41.e926bea2.js"><link rel="prefetch" href="/assets/js/42.75a0702d.js"><link rel="prefetch" href="/assets/js/43.7dc2916c.js"><link rel="prefetch" href="/assets/js/44.8a03bcc6.js"><link rel="prefetch" href="/assets/js/45.11b86161.js"><link rel="prefetch" href="/assets/js/46.e667b72f.js"><link rel="prefetch" href="/assets/js/47.422b5129.js"><link rel="prefetch" href="/assets/js/48.e7256758.js"><link rel="prefetch" href="/assets/js/49.ee9142c4.js"><link rel="prefetch" href="/assets/js/5.b8fa0f7d.js"><link rel="prefetch" href="/assets/js/50.b39a2496.js"><link rel="prefetch" href="/assets/js/51.2aab1a9e.js"><link rel="prefetch" href="/assets/js/52.0705b3f4.js"><link rel="prefetch" href="/assets/js/53.90549cf5.js"><link rel="prefetch" href="/assets/js/54.877e9165.js"><link rel="prefetch" href="/assets/js/55.9e28e992.js"><link rel="prefetch" href="/assets/js/56.3fcd248e.js"><link rel="prefetch" href="/assets/js/57.5d215a77.js"><link rel="prefetch" href="/assets/js/58.9285221d.js"><link rel="prefetch" href="/assets/js/59.8aebdcaf.js"><link rel="prefetch" href="/assets/js/6.71965164.js"><link rel="prefetch" href="/assets/js/60.2ddc8003.js"><link rel="prefetch" href="/assets/js/61.7b4bff22.js"><link rel="prefetch" href="/assets/js/62.34b3e2b0.js"><link rel="prefetch" href="/assets/js/63.d9fa33c5.js"><link rel="prefetch" href="/assets/js/64.920677bf.js"><link rel="prefetch" href="/assets/js/65.96a8f5d3.js"><link rel="prefetch" href="/assets/js/66.49b6b966.js"><link rel="prefetch" href="/assets/js/67.7fab2d9e.js"><link rel="prefetch" href="/assets/js/68.2c05cfbc.js"><link rel="prefetch" href="/assets/js/69.f77b2601.js"><link rel="prefetch" href="/assets/js/70.6401200f.js"><link rel="prefetch" href="/assets/js/71.3e5b5495.js"><link rel="prefetch" href="/assets/js/72.fe15b8c8.js"><link rel="prefetch" href="/assets/js/73.c7f1818d.js"><link rel="prefetch" href="/assets/js/74.1a09ee0f.js"><link rel="prefetch" href="/assets/js/75.93c167bf.js"><link rel="prefetch" href="/assets/js/76.b8013808.js"><link rel="prefetch" href="/assets/js/77.7134f2a7.js"><link rel="prefetch" href="/assets/js/78.3119b29c.js"><link rel="prefetch" href="/assets/js/79.f936d8e6.js"><link rel="prefetch" href="/assets/js/8.d32debf2.js"><link rel="prefetch" href="/assets/js/80.9f964421.js"><link rel="prefetch" href="/assets/js/81.f21bc1a1.js"><link rel="prefetch" href="/assets/js/82.4225ca50.js"><link rel="prefetch" href="/assets/js/83.128f8f44.js"><link rel="prefetch" href="/assets/js/84.5425d2b3.js"><link rel="prefetch" href="/assets/js/85.3e1285ce.js"><link rel="prefetch" href="/assets/js/86.4b874b51.js"><link rel="prefetch" href="/assets/js/87.4de5ab6b.js"><link rel="prefetch" href="/assets/js/88.8b8cfe71.js"><link rel="prefetch" href="/assets/js/89.3d377ccd.js"><link rel="prefetch" href="/assets/js/9.9ec48afe.js"><link rel="prefetch" href="/assets/js/90.b2db0e28.js"><link rel="prefetch" href="/assets/js/91.0c2217af.js"><link rel="prefetch" href="/assets/js/92.1c4903aa.js"><link rel="prefetch" href="/assets/js/93.629c7061.js"><link rel="prefetch" href="/assets/js/94.528726a9.js"><link rel="prefetch" href="/assets/js/95.bc6eeac1.js"><link rel="prefetch" href="/assets/js/96.c9f2fb0d.js"><link rel="prefetch" href="/assets/js/97.408ffb7f.js"><link rel="prefetch" href="/assets/js/98.8d6aff6b.js"><link rel="prefetch" href="/assets/js/99.5052cba5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f945d553.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-0dd3628c><header class="navbar" data-v-0dd3628c><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/images/resume/avater.jpg" alt="张寒" class="logo"> <span class="site-name can-hide">张寒</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Frontend" class="dropdown-title"><span class="title">Frontend</span> <span class="arrow down"></span></button> <button type="button" aria-label="Frontend" class="mobile-dropdown-title"><span class="title">Frontend</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front/html/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/front/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/front/javascript/" class="nav-link">
  javascript
</a></li><li class="dropdown-item"><!----> <a href="/front/api/" class="nav-link">
  API
</a></li><li class="dropdown-item"><!----> <a href="/front/browser/" class="nav-link">
  Browser
</a></li><li class="dropdown-item"><!----> <a href="/front/component/" class="nav-link">
  Component
</a></li><li class="dropdown-item"><!----> <a href="/front/toolchain/" class="nav-link">
  ToolChain
</a></li><li class="dropdown-item"><!----> <a href="/front/pubsys/" class="nav-link">
  Publish
</a></li><li class="dropdown-item"><!----> <a href="/front/frame/" class="nav-link">
  Framework
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language" class="dropdown-title"><span class="title">Language</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language" class="mobile-dropdown-title"><span class="title">Language</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/language/typescript/" class="nav-link">
  typescript
</a></li><li class="dropdown-item"><!----> <a href="/language/c/" class="nav-link">
  c
</a></li><li class="dropdown-item"><!----> <a href="/language/python/" class="nav-link">
  python
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Software" class="dropdown-title"><span class="title">Software</span> <span class="arrow down"></span></button> <button type="button" aria-label="Software" class="mobile-dropdown-title"><span class="title">Software</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tool/git/" class="nav-link router-link-active">
  GIT
</a></li><li class="dropdown-item"><!----> <a href="/tool/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/tool/nginx/" class="nav-link">
  nginx
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Function" class="dropdown-title"><span class="title">Function</span> <span class="arrow down"></span></button> <button type="button" aria-label="Function" class="mobile-dropdown-title"><span class="title">Function</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/func/usually/" class="nav-link">
  功能
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/zhanghan19/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-0dd3628c></div> <aside class="sidebar" data-v-0dd3628c><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Frontend" class="dropdown-title"><span class="title">Frontend</span> <span class="arrow down"></span></button> <button type="button" aria-label="Frontend" class="mobile-dropdown-title"><span class="title">Frontend</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front/html/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/front/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/front/javascript/" class="nav-link">
  javascript
</a></li><li class="dropdown-item"><!----> <a href="/front/api/" class="nav-link">
  API
</a></li><li class="dropdown-item"><!----> <a href="/front/browser/" class="nav-link">
  Browser
</a></li><li class="dropdown-item"><!----> <a href="/front/component/" class="nav-link">
  Component
</a></li><li class="dropdown-item"><!----> <a href="/front/toolchain/" class="nav-link">
  ToolChain
</a></li><li class="dropdown-item"><!----> <a href="/front/pubsys/" class="nav-link">
  Publish
</a></li><li class="dropdown-item"><!----> <a href="/front/frame/" class="nav-link">
  Framework
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language" class="dropdown-title"><span class="title">Language</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language" class="mobile-dropdown-title"><span class="title">Language</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/language/typescript/" class="nav-link">
  typescript
</a></li><li class="dropdown-item"><!----> <a href="/language/c/" class="nav-link">
  c
</a></li><li class="dropdown-item"><!----> <a href="/language/python/" class="nav-link">
  python
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Software" class="dropdown-title"><span class="title">Software</span> <span class="arrow down"></span></button> <button type="button" aria-label="Software" class="mobile-dropdown-title"><span class="title">Software</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tool/git/" class="nav-link router-link-active">
  GIT
</a></li><li class="dropdown-item"><!----> <a href="/tool/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/tool/nginx/" class="nav-link">
  nginx
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Function" class="dropdown-title"><span class="title">Function</span> <span class="arrow down"></span></button> <button type="button" aria-label="Function" class="mobile-dropdown-title"><span class="title">Function</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/func/usually/" class="nav-link">
  功能
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/zhanghan19/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/tool/git/" aria-current="page" class="sidebar-link">GIT</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>git</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tool/git/intro.html" class="sidebar-link">git 简介</a></li><li><a href="/tool/git/operation.html" class="sidebar-link">基本操作</a></li><li><a href="/tool/git/branch.html" aria-current="page" class="active sidebar-link">分支管理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tool/git/branch.html#结构" class="sidebar-link">结构</a></li><li class="sidebar-sub-header"><a href="/tool/git/branch.html#_5-1-概念" class="sidebar-link">5.1 概念</a></li><li class="sidebar-sub-header"><a href="/tool/git/branch.html#_5-2-创建与合并分支" class="sidebar-link">5.2 创建与合并分支</a></li><li class="sidebar-sub-header"><a href="/tool/git/branch.html#案例" class="sidebar-link">案例：</a></li><li class="sidebar-sub-header"><a href="/tool/git/branch.html#_5-3-解决冲突" class="sidebar-link">5.3 解决冲突</a></li><li class="sidebar-sub-header"><a href="/tool/git/branch.html#_5-4-分支管理策略" class="sidebar-link">5.4 分支管理策略</a></li><li class="sidebar-sub-header"><a href="/tool/git/branch.html#_5-5-bug分支" class="sidebar-link">5.5 Bug分支</a></li></ul></li><li><a href="/tool/git/github.html" class="sidebar-link">github使用</a></li></ul></section></li></ul> </aside> <main class="page" data-v-0dd3628c> <div class="theme-default-content content__default"><h1 id="分支管理"><a href="#分支管理" class="header-anchor">#</a> 分支管理</h1> <h2 id="结构"><a href="#结构" class="header-anchor">#</a> 结构</h2> <p><img src="/images/git/branch.png" alt=""></p> <h2 id="_5-1-概念"><a href="#_5-1-概念" class="header-anchor">#</a> 5.1 概念</h2> <p>分支就是科幻电影里面的平行宇宙，当你正在电脑前努力学习Git的时候，另一个你正在另一个平行宇宙里努力学习SVN。</p> <p>如果两个平行宇宙互不干扰，那对现在的你也没啥影响。不过，在某个时间点，两个平行宇宙合并了，结果，你既学会了git又学会了SVN！</p> <p><img src="/images/git/branch02.png" alt=""></p> <p>分支在实际中有什么用呢？假设你准备开发一个新功能，但是需要两周才能完成，第一周你写了50%的代码，如果立刻提交，由于代码还没写完，不完整的代码库会导致别人不能干活了。如果等代码全部写完再一次提交，又存在丢失每天进度的巨大风险。</p> <p>现在有了分支，就不用怕了。你创建了一个属于你自己的分支，别人看不到，还继续在原来的分支上正常工作，而你在自己的分支上干活，想提交就提交，直到开发完毕后，再一次性合并到原来的分支上，这样，既安全，又不影响别人工作。</p> <h2 id="_5-2-创建与合并分支"><a href="#_5-2-创建与合并分支" class="header-anchor">#</a> 5.2 创建与合并分支</h2> <p>git把我们之前每次提交的版本串成一条时间线，这条时间线就是一个分支。截止到目前只有一条时间线，在git里，这个分支叫<strong>主分支</strong>，即<strong>master</strong>分支。HEAD严格来说不是指向提交，而是指向master，master才是指向提交的，所以，HEAD指向的就是当前分支。</p> <p>(1) 一开始的时候，master分支是一条线，git用master指向最新的提交，再用HEAD指向master，就能确定当前分支，以及当前分支的提交点：</p> <p><img src="/images/git/branch03.png" alt=""></p> <p>每次提交，master分支都会向前移动一步，这样，随着你不断提交，master分支的线也越来越长。</p> <p>(2)当我们创建新的分支，例如dev时，git新建了一个指针叫dev，指向master相同的提交，再把HEAD指向dev，就表示当前分支在dev上：</p> <p><img src="/images/git/branch04.png" alt=""></p> <p>git创建一个分支很快，因为除了增加一个dev指针，改变HEAD的指向，工作区的文件都没有任何变化。</p> <p>(3)不过，从现在开始，对工作区的修改和提交就是针对dev分支了，比如新提交一次后，dev指针往前移动一步，而master指针不变：</p> <p><img src="/images/git/branch05.png" alt=""></p> <p>(4)假如我们在dev上的工作完成了，就可以把dev合并到master上。git怎么合并呢？最简单的方法，就是直接把master指向dev的当前提交，就完成了合并：</p> <p><img src="/images/git/branch06.png" alt=""></p> <p>git合并分支也很快，就改改指针，工作区内容也不变。</p> <p>(5)合并完分支后，甚至可以删除dev分支。删除dev分支就是把dev指针给删掉，删掉后，我们就剩下了一条master分支：</p> <p><img src="/images/git/branch07.png" alt=""></p> <h2 id="案例"><a href="#案例" class="header-anchor">#</a> 案例：</h2> <p>(1) 执行如下命令可以查看当前有几个分支并且看到在哪个分支下工作。</p> <p><img src="/images/git/branch08.png" alt=""></p> <p>(2) 下面创建一个分支dev并切换到其上进行工作。</p> <p><img src="/images/git/branch09.png" alt=""></p> <p><img src="/images/git/branch10.png" alt=""></p> <p>(3) 下面我们修改code.txt内容，在里面添加一行，并进行提交。</p> <p><img src="/images/git/branch11.png" alt=""></p> <p><img src="/images/git/branch12.png" alt=""></p> <p>(4)dev分支的工作完成，我们就可以切换回master分支：</p> <p><img src="/images/git/branch13.png" alt=""></p> <p><img src="/images/git/branch14.png" alt=""></p> <p>查看code.txt，发现添加的内容没有了。因为那个提交是在dev分支上，而master分支此刻的提交点并没有变：</p> <p>(5) 现在，我们把dev分支的工作成果合并到master分支上：</p> <p><img src="/images/git/branch15.png" alt=""></p> <p>git merge命令用于合并指定分支到当前分支。合并后，再查看code.txt的内容，就可以看到，和dev分支的最新提交是完全一样的。</p> <p><img src="/images/git/branch16.png" alt=""></p> <p>注意到上面的Fast-forward信息，Git告诉我们，这次合并是“快进模式”，也就是直接把master指向dev的当前提交，所以合并速度非常快。****</p> <p><img src="/images/git/branch17.png" alt=""></p> <p>(6)合并完成后，就可以放心地删除dev分支了，删除后，查看branch，就只剩下master分支了。</p> <p><img src="/images/git/branch18.png" alt=""></p> <p><img src="/images/git/branch19.png" alt=""></p> <p><strong>小结：</strong></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>查看分支：git branch

创建分支：git branch <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>

切换分支：git checkout <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>

创建+切换分支：git checkout -b <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>

合并某分支到当前分支：git merge <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>

删除分支：git branch -d <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="_5-3-解决冲突"><a href="#_5-3-解决冲突" class="header-anchor">#</a> 5.3 解决冲突</h2> <p>合并分支往往也不是一帆风顺的。</p> <p>(1) 再创建一个新分支dev。</p> <p><img src="/images/git/branch20.png" alt=""></p> <p>(2) 修改code.txt内容，并进行提交。</p> <p><img src="/images/git/branch21.png" alt=""></p> <p>(3) 切换回master分支。</p> <p><img src="/images/git/branch22.png" alt=""></p> <p>(4) 在master的code.txt添加一行内容并进行提交。</p> <p><img src="/images/git/branch23.png" alt=""></p> <p>现在，master分支和dev分支各自都分别有新的提交，变成了这样：</p> <p><img src="/images/git/branch24.png" alt=""></p> <p>这种情况下，git无法执行“快速合并”，只能试图把各自的修改合并起来，但这种合并就可能会有冲突。</p> <p>(5) 执行如下命令尝试将dev分支合并到master分支上来</p> <p><img src="/images/git/branch25.png" alt=""></p> <p>git告诉我们，code.txt文件存在冲突，必须手动解决冲突后再提交。</p> <p><img src="/images/git/branch26.png" alt=""></p> <p>(7) 查看code.txt的内容。</p> <p><img src="/images/git/branch27.png" alt=""></p> <p>(8) git用&lt;&lt;&lt;&lt;&lt;&lt;&lt;，=======，&gt;&gt;&gt;&gt;&gt;&gt;&gt;标记出不同分支的内容，我们修改如下后保存：</p> <p><img src="/images/git/branch28.png" alt=""></p> <p>(9) 再提交。</p> <p><img src="/images/git/branch29.png" alt=""></p> <p>(10) 现在，master分支和dev分支变成了下图所示：</p> <p><img src="/images/git/branch30.png" alt=""></p> <p>(11) 用带参数的git log也可以看到分支的合并情况：</p> <p><img src="/images/git/branch31.png" alt=""></p> <p>(12) 最后工作完成，可以删除dev分支。</p> <p><img src="/images/git/branch32.png" alt=""></p> <h2 id="_5-4-分支管理策略"><a href="#_5-4-分支管理策略" class="header-anchor">#</a> 5.4 分支管理策略</h2> <p>**通常，合并分支时，如果可能，git会用fast forward模式，但是有些快速合并不能成而且合并时没有冲突，这个时候会合并之后并做一次新的提交。**但这种模式下，删除分支后，会丢掉分支信息。</p> <p>(1) 创建切换到dev分支下。</p> <p><img src="/images/git/branch33.png" alt=""></p> <p>(2) 新建一个文件code3.txt编辑内容如下，并提交一个commit。</p> <p><img src="/images/git/branch34.png" alt=""></p> <p>(3) 切换回master分支，编辑code.txt并进行一个提交。</p> <p><img src="/images/git/branch35.png" alt=""></p> <p><img src="/images/git/branch36.png" alt=""></p> <p>(4) 合并dev分支的内容到master分支。</p> <p><img src="/images/git/branch37.png" alt=""></p> <p>(5) 出现如下提时，这是因为这次不能进行快速合并，所以git提示输入合并说明信息，输入之后合并内容之后git会自动创建一次新的提交。</p> <p><img src="/images/git/branch38.png" alt=""></p> <p><img src="/images/git/branch39.png" alt=""></p> <p>(6) 使用分支命令查看分支信息。</p> <p><img src="/images/git/branch40.png" alt=""></p> <p>(7) 删除dev分支。</p> <p><img src="/images/git/branch41.png" alt=""></p> <p>如果要强制禁用fast forward模式，git就会在merge时生成一个新的commit，这样，从分支历史上就可以看出分支信息。</p> <p>(1) 创建并切换到dev分支。</p> <p><img src="/images/git/branch42.png" alt=""></p> <p>(2) 修改code.txt内容，并提交一个commit。</p> <p><img src="/images/git/branch43.png" alt=""></p> <p>(3) 切换回master分支。</p> <p><img src="/images/git/branch44.png" alt=""></p> <p>(4) 准备合并dev分支，请注意--no-ff参数，表示禁用Fast forward：</p> <p><img src="/images/git/branch45.png" alt=""></p> <p>因为本次合并要创建一个新的commit，所以加上-m参数，把commit描述写进去。</p> <p>(5) 合并后，我们用git log看看分支历史：</p> <p>可以看到，不使用Fast forward模式，merge后就像这样：</p> <p><img src="/images/git/branch46.png" alt=""></p> <p><img src="/images/git/branch47.png" alt=""></p> <h2 id="_5-5-bug分支"><a href="#_5-5-bug分支" class="header-anchor">#</a> 5.5 Bug分支</h2> <p>软件开发中，bug就像家常便饭一样。有了bug就需要修复，在git中，由于分支是如此的强大，所以，<strong>每个bug都可以通过一个新的临时分支来修复，修复后，合并分支，然后将临时分支删除。</strong></p> <p>(1) 当你接到一个修复一个代号001的bug的任务时，很自然地，你想创建一个分支bug-001来修复它，但是，等等，当前正在dev上进行的工作还没有提交：</p> <p><img src="/images/git/branch48.png" alt=""></p> <p>并不是你不想提交，而是工作只进行到一半，还没法提交，预计完成还需1天时间。但是，必须在两个小时内修复该bug，怎么办？</p> <p>(2) git还提供了一个stash功能，可以把当前工作现场“储藏”起来，等以后恢复现场后继续工作：</p> <p><img src="/images/git/branch49.png" alt=""></p> <p>(3) 首先确定要在哪个分支上修复bug，假定需要在master分支上修复，就从master创建临时分支：</p> <p><img src="/images/git/branch50.png" alt=""></p> <p>(4) 现在修复bug,把 the new line删掉，然后提交。</p> <p><img src="/images/git/branch51.png" alt=""></p> <p>(5) 修复完成后，切换到master分支，并完成合并，最后删除bug-001分支。</p> <p><img src="/images/git/branch52.png" alt=""></p> <p>(6) 现在bug-001修复完成，是时候接着回到dev分支干活了！</p> <p><img src="/images/git/branch53.png" alt=""></p> <p>(7)工作区是干净的，刚才的工作现场存到哪去了？用git stash list命令看看：</p> <p><img src="/images/git/branch54.png" alt=""></p> <p>作现场还在，git把stash内容存在某个地方了，但是需要恢复一下.</p> <p><img src="/images/git/branch55.png" alt=""></p> <p><strong>小结：</strong></p> <p>修复bug时，我们会通过创建新的bug分支进行修复，然后合并，最后删除；</p> <p>当手头工作没有完成时，先把工作现场git stash一下，然后去修复bug，修复后，再git stash pop，恢复工作现场。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">12/1/2020, 1:02:51 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/tool/git/operation.html" class="prev">
        基本操作
      </a></span> <span class="next"><a href="/tool/git/github.html">
        github使用
      </a>
      →
    </span></p></div>  <!----></main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.05e46699.js" defer></script><script src="/assets/js/7.51cb44f6.js" defer></script><script src="/assets/js/1.c271960c.js" defer></script><script src="/assets/js/3.717632d5.js" defer></script><script src="/assets/js/119.62e33162.js" defer></script>
  </body>
</html>
